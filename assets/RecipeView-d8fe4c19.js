import{_ as m,o as s,c as r,a as g,b as c,t as _,n as I,r as y,d as b,F as w,e as x,w as f,f as E,g as k,h as S,i as T,j as v,k as L,u as V,l as p,p as j,m as A,R as O}from"./index-26b09884.js";const H=(t,n)=>{const e=t[n];return e?typeof e=="function"?e():Promise.resolve(e):new Promise((l,i)=>{(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(i.bind(null,new Error("Unknown variable dynamic import: "+n)))})},q={name:"Ingredient",data(){return{checked:!1}},methods:{toTitleCase:function(t){return t.replace(/\w\S*/g,function(n){return n.charAt(0).toUpperCase()+n.substring(1).toLowerCase()})}},props:{ingredient:{type:Object,required:!0},checkbox:Boolean}};const B={key:0,class:"check"},N=["checked"],z={class:"amount"},F={key:2,class:"unit"},K={class:"name"};function M(t,n,e,l,i,h){return s(),r("div",{class:I(["ingredient",{checked:i.checked}]),onClick:n[0]||(n[0]=o=>{e.checkbox&&(i.checked=!i.checked)})},[e.checkbox?(s(),r("button",B)):g("",!0),e.checkbox?(s(),r("input",{key:1,type:"checkbox",checked:i.checked,class:"hidden","aria-label":"check ingredient",hidden:""},null,8,N)):g("",!0),c("span",z,_(e.ingredient.amount),1),e.ingredient.unit.length>0?(s(),r("span",F,_(e.ingredient.unit),1)):g("",!0),c("span",K,_(h.toTitleCase(e.ingredient.name)),1)],2)}const P=m(q,[["render",M],["__scopeId","data-v-d7a0144a"]]),U={name:"Ingredients",props:{ingredients:Array},components:{Ingredient:P}};const W={class:"ingredients"};function Y(t,n,e,l,i,h){const o=y("Ingredient"),a=b("scroll-in");return s(),r("section",W,[c("ul",null,[(s(!0),r(w,null,x(e.ingredients,(d,u)=>f((s(),E(o,{ingredient:d,checkbox:!0,key:u},null,8,["ingredient"])),[[a]])),128))])])}const $=m(U,[["render",Y],["__scopeId","data-v-2087660a"]]),G={name:"instructions",data(){return{checked:!1}},props:{instruction:{type:Object,required:!0},index:{type:Number,required:!0}},components:{Ingredient:P}};const J={class:"content"},Q={class:"index"},X={key:0,class:"help"};function Z(t,n,e,l,i,h){var a,d;const o=y("Ingredient");return s(),r("div",{class:I(["instruction",{checked:i.checked,bake:e.instruction.title.toLowerCase().includes("bake")}])},[c("div",J,[c("h2",{onClick:n[0]||(n[0]=u=>i.checked=!i.checked),class:"title"},[c("span",Q,_(e.index+1),1),k(" "+_(e.instruction.title),1)]),c("p",null,_(e.instruction.text),1)]),((d=(a=e.instruction)==null?void 0:a.ingredients)==null?void 0:d.length)>0?(s(),r("div",X,[c("ul",null,[(s(!0),r(w,null,x(e.instruction.ingredients,(u,R)=>(s(),E(o,{ingredient:u,checkbox:!1,key:R},null,8,["ingredient"]))),128))])])):g("",!0)],2)}const ee=m(G,[["render",Z],["__scopeId","data-v-a0d94771"]]),ne={name:"Instructions",props:{instructions:Array},components:{Instruction:ee}};const te={class:"instructions"};function se(t,n,e,l,i,h){const o=y("Instruction"),a=b("scroll-in");return s(),r("section",te,[c("ul",null,[(s(!0),r(w,null,x(e.instructions,(d,u)=>f((s(),E(o,{instruction:d,key:u,index:u},null,8,["instruction","index"])),[[a]])),128))])])}const C=m(ne,[["render",se],["__scopeId","data-v-72bc09bb"]]),D=t=>(j("data-v-2e1ed50d"),t=t(),A(),t),ie=D(()=>c("h1",null,"Ingredients",-1)),oe=D(()=>c("h1",null,"Instructions",-1)),ce={name:"Recipe",data(){return{name:"",ingredients:[],instructions:[],scrollProgress:0,collapseHeader:!1,lastScrollPosition:0}},components:{Ingredients:$,Instructions:C},created(){window.addEventListener("scroll",this.scroll),this.fetchData()},watch:{$route:"fetchData"},unmounted:function(){window.removeEventListener("scroll",this.scroll)},methods:{fetchData:async function(){var t,n;if((n=(t=this==null?void 0:this.$route)==null?void 0:t.params)!=null&&n.name){const l=await(await H(Object.assign({"../assets/apfelPfannkuchen.json":()=>p(()=>import("./apfelPfannkuchen-7f0807f6.js"),[]),"../assets/butter.json":()=>p(()=>import("./butter-6e63251e.js"),[]),"../assets/omaKuchen.json":()=>p(()=>import("./omaKuchen-1f8a2ff4.js"),[]),"../assets/rumKugeln.json":()=>p(()=>import("./rumKugeln-e7592eeb.js"),[])}),`../assets/${this.$route.params.name}.json`)).default;this.ingredients=[...l.ingredients];let i={};for(let o of this.ingredients)i[o.name]={...o};let h=[...l.instructions].map(o=>{var d;let a={...o,ingredients:[]};return((d=o==null?void 0:o.ingredients)==null?void 0:d.length)>0&&(a.ingredients=o.ingredients.map(function(u){return{...i[u]}})),a});this.instructions=[...h],this.name=l.name}},scroll:function(){let t=document.body.scrollTop||document.documentElement.scrollTop,n=document.documentElement.scrollHeight-document.documentElement.clientHeight;this.scrollProgress=t/n*100;const e=window.pageYOffset||document.documentElement.scrollTop;e<0||(this.collapseHeader=e>20,this.lastScrollPosition=e)}}},re=S({...ce,setup(t){return(n,e)=>{const l=b("scroll-in");return s(),r("div",{class:"recipe",onScroll:e[0]||(e[0]=i=>n.scroll())},[c("header",{class:I({collapse:n.collapseHeader})},[c("h2",null,_(n.name),1),c("div",{class:"progress",style:T({width:n.scrollProgress+"%"})},null,4)],2),ie,v($,{ingredients:n.ingredients},null,8,["ingredients"]),oe,v(C,{instructions:n.instructions},null,8,["instructions"]),c("footer",null,[f((s(),r("h2",null,[k("All done!")])),[[l,-.05]]),f((s(),r("ul",null,[v(V(O),{to:"/"},{default:L(()=>[k("Home")]),_:1})])),[[l,-.05]])])],32)}}});const ae=m(re,[["__scopeId","data-v-2e1ed50d"]]);export{ae as default};
